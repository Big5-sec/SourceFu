/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.8.1/userguide/java_library_plugin.html
 */

plugins {
  id 'java'
}

version = '0.01'


dependencies {
	//antlr runtime
	compile group: 'org.antlr', name: 'antlr4-runtime', version: '4.7.2'
	
	//picocli
	compile group: 'info.picocli', name: 'picocli', version: '3.9.5'
	
	//antlr
	compile group: 'org.antlr', name: 'antlr4', version: '4.7.2'
	
	//spark
	compile group: 'com.sparkjava', name: 'spark-core', version: '2.8.0'
	//spark require slf4j
	compile group: 'org.slf4j', name: 'slf4j-simple', version: '1.7.25'
	compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
	compile group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.1'
	compile group: 'org.eclipse.jetty', name: 'jetty-server', version: '9.4.11.v20180605'	
	compile group: 'org.eclipse.jetty', name: 'jetty-util', version: '9.4.11.v20180605'
	compile group: 'org.eclipse.jetty', name: 'jetty-http', version: '9.4.11.v20180605'
	compile group: 'org.eclipse.jetty', name: 'jetty-io', version: '9.4.11.v20180605'
	compile group: 'com.sparkjava', name: 'spark-template-velocity', version: '2.7.1'
	compile group: 'org.apache.velocity', name: 'velocity', version: '1.7'
	compile group: 'commons-collections', name: 'commons-collections', version: '3.2.2'
	compile group: 'commons-lang', name: 'commons-lang', version: '2.6'
	
	compile 'dev.morphia.morphia:core:1.4.1'
	compile group: 'org.mongodb', name: 'mongo-java-driver', version: '3.10.1'
		
    compile group: 'com.google.code.gson', name: 'gson', version: '2.8.5'		
		
	//ST 
	compile group: 'org.antlr', name: 'stringtemplate', version: '4.0.2'
	
	compile group: 'org.abego.treelayout', name: 'org.abego.treelayout.core', version: '1.0.3'
}


configurations.all {
	transitive = false
}

// In this section you declare where to find the dependencies of your project
repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    mavenCentral()
}

task fatJar(type: Jar) {
	manifest {
        attributes 'Implementation-Title': 'Gradle Jar File Example',  
        	'Implementation-Version': version,
        	'Main-Class': 'SourceFu'
    }
    //version = null
    baseName = project.name + '-latest'
    from(configurations.compile.collect { it.isDirectory() ? it : zipTree(it) })
    with jar
}

task copyJar(type: Copy) {
    from fatJar // here it automatically reads jar file produced from jar task
    into '../jar/'
}

//build.dependsOn copyJar
//mainClassName = 'SourceFu'